_mode=cross
pkgname=device-sdm845-xiaomi-beryllium-ebbg
pkgver=0.2
pkgrel=1
_arches=specific
arch=(aarch64)
license=(MIT)
depends=(device-sdm845-xiaomi-beryllium-common)
source=(https://gitlab.com/postmarketOS/pmaports/-/raw/master/device/community/device-xiaomi-beryllium/deviceinfo)
sha256sums=(e15bc2da2af98211a9c2ac3fd14e642f5ba7b52f9718258163bf8c19e9318bf3)

package() {
  cp "$srcdir"/deviceinfo "$srcdir"/deviceinfo_
  sed -i "s/deviceinfo_dtb_ebbg/deviceinfo_dtb/" "$srcdir"/deviceinfo_
  cat >>"$srcdir"/deviceinfo_ <<EOF

deviceinfo_partitions_data="/dev/sda21"
deviceinfo_partitions_microsd="/dev/mmcblk0"
EOF
  install -Dm644 "$srcdir"/deviceinfo_ "$pkgdir"/etc/kupfer/deviceinfo
}
