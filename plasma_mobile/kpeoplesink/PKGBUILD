# Maintainer: Danct12 <danct12@disroot.org>
# Contributor: Bernhard Landauer <bernhard@manjaro.org>
# Contributor: Bhushan Shah <bhush94 at gmail dot com>
_mode=host
pkgname=kpeoplesink
pkgdesc="Expose Sink contacts to KPeople"
pkgver=r81.g4f129cb
pkgrel=2
_arches=all
arch=(
    x86_64
    aarch64
    armv7h
)
license=(LGPL)
depends=(
    kaccounts-integration
    kcontacts5
    kpeople5
    sink
)
makedepends=(
    git
    cmake
    extra-cmake-modules
)

_commit=4f129cb113597c75ac9a194a0362983eaf1f7915
source=(
    "git+https://invent.kde.org/pim/kpeoplesink.git#commit=$_commit"
)
sha256sums=(
    SKIP
)

prepare() {
    mkdir -p build
}

build() {
    cd build
    cmake ../$pkgname \
        -DCMAKE_INSTALL_PREFIX=/usr \
        -DBUILD_TESTING=OFF \
        -DLIB_INSTALL_DIR=lib \
        -DKDE_INSTALL_USE_QT_SYS_PATHS=ON \
        -DCMAKE_BUILD_TYPE=Release
    make
}

package() {
    cd build
    make DESTDIR="$pkgdir/" install
}
